let pokemonRepository = function () { let e = [], t = document.querySelector("#modal-container"); function n(t) { "object" == typeof t && "name" in t ? e.push(t) : console.log("pokemon is not correct") } function i() { return e } function o() { t.classList.remove("is-visible") } return window.addEventListener("keydown", e => { "Escape" === e.key && t.classList.contains("is-visible") && o() }), t.addEventListener("click", e => { e.target === t && o() }), { add: n, getAll: i, addListItem: function e(n) { let i = document.querySelector(".pokemon-list"), o = document.createElement("li"); o.classList.add("list-group-item"); let a = document.createElement("button"); a.classList.add("btn", "btn-primary"), a.addEventListener("submit", function (e) { e.preventDefault() }), a.innerText = n.name, a.setAttribute("data-target", "#modal-container"), a.setAttribute("data-toggle", "modal"), a.classList.add("button-class"), o.appendChild(a), i.appendChild(o), a.addEventListener("click", function () { (function e(n) { pokemonRepository.loadDetails(n).then(function () { let e = document.querySelector(".modal-title"), i = document.querySelector(".modal-body"); i.innerHTML = "", e.innerText = n.name.charAt(0).toUpperCase() + n.name.slice(1); let o = document.createElement("img"); o.src = n.imageUrl; let a = document.createElement("p"); a.innerText = "Height: " + n.height; let s = document.createElement("div"); s.innerText = "Type: " + n.types, i.appendChild(o), i.appendChild(a), i.appendChild(s), t.classList.add("is-visible") }) })(n) }) }, loadList: function e() { return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function (e) { return e.json() }).then(function (e) { e.results.forEach(function (e) { let t = { name: e.name, detailsUrl: e.url }; n(t), console.log(t) }) }).catch(function (e) { console.error(e) }) }, loadDetails: function e(t) { return fetch(t.detailsUrl).then(function (e) { return e.json() }).then(function (e) { t.imageUrl = e.sprites.front_default, t.height = e.height, t.types = e.types, 2 === e.types.length ? (t.types[0] = e.types[0].type.name, t.types[1] = e.types[1].type.name) : t.types[0] = e.types[0].type.name }).catch(function (e) { console.error(e) }) } } }(); pokemonRepository.loadList().then(function () { pokemonRepository.getAll().forEach(function (e) { pokemonRepository.addListItem(e) }) });